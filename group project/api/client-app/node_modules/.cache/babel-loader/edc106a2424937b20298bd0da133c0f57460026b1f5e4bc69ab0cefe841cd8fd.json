{"ast":null,"code":"// src/components/ProtectedRoute.jsx\nimport React,{useContext}from'react';import{Navigate}from'react-router-dom';import{AuthContext}from\"../../context/AuthContext\";import jwt_decode from'jwt-decode';import{jsx as _jsx}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children,adminOnly}=_ref;const{user,loading}=useContext(AuthContext);if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}if(!user){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});}// Check if the user is an admin if the route requires admin access\nif(adminOnly){const decodedToken=jwt_decode(user.token);const isAdmin=decodedToken.IsAdmin===\"true\";if(!isAdmin){return/*#__PURE__*/_jsx(Navigate,{to:\"/user-dashboard\"});// Redirect non-admin users to the user dashboard\n}}return children;};export default ProtectedRoute;","map":{"version":3,"names":["React","useContext","Navigate","AuthContext","jwt_decode","jsx","_jsx","ProtectedRoute","_ref","children","adminOnly","user","loading","to","decodedToken","token","isAdmin","IsAdmin"],"sources":["C:/Users/sigur/OneDrive/Skrivebord/Test/Solution2/api/client-app/src/Components/Auth/ProtectedRoute.jsx"],"sourcesContent":["// src/components/ProtectedRoute.jsx\r\nimport React, { useContext } from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport jwt_decode from 'jwt-decode';\r\n\r\nconst ProtectedRoute = ({ children, adminOnly }) => {\r\n    const { user, loading } = useContext(AuthContext);\r\n\r\n    if (loading) {\r\n        return <div>Loading...</div>;\r\n    }\r\n\r\n    if (!user) {\r\n        return <Navigate to=\"/login\" />;\r\n    }\r\n\r\n    // Check if the user is an admin if the route requires admin access\r\n    if (adminOnly) {\r\n        const decodedToken = jwt_decode(user.token);\r\n        const isAdmin = decodedToken.IsAdmin === \"true\";\r\n        if (!isAdmin) {\r\n            return <Navigate to=\"/user-dashboard\" />; // Redirect non-admin users to the user dashboard\r\n        }\r\n    }\r\n\r\n    return children;\r\n};\r\n\r\nexport default ProtectedRoute;\r\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,UAAU,KAAQ,OAAO,CACzC,OAASC,QAAQ,KAAQ,kBAAkB,CAC3C,OAASC,WAAW,KAAQ,2BAA2B,CACvD,MAAO,CAAAC,UAAU,KAAM,YAAY,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEpC,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAA6B,IAA5B,CAAEC,QAAQ,CAAEC,SAAU,CAAC,CAAAF,IAAA,CAC3C,KAAM,CAAEG,IAAI,CAAEC,OAAQ,CAAC,CAAGX,UAAU,CAACE,WAAW,CAAC,CAEjD,GAAIS,OAAO,CAAE,CACT,mBAAON,IAAA,QAAAG,QAAA,CAAK,YAAU,CAAK,CAAC,CAChC,CAEA,GAAI,CAACE,IAAI,CAAE,CACP,mBAAOL,IAAA,CAACJ,QAAQ,EAACW,EAAE,CAAC,QAAQ,CAAE,CAAC,CACnC,CAEA;AACA,GAAIH,SAAS,CAAE,CACX,KAAM,CAAAI,YAAY,CAAGV,UAAU,CAACO,IAAI,CAACI,KAAK,CAAC,CAC3C,KAAM,CAAAC,OAAO,CAAGF,YAAY,CAACG,OAAO,GAAK,MAAM,CAC/C,GAAI,CAACD,OAAO,CAAE,CACV,mBAAOV,IAAA,CAACJ,QAAQ,EAACW,EAAE,CAAC,iBAAiB,CAAE,CAAC,CAAE;AAC9C,CACJ,CAEA,MAAO,CAAAJ,QAAQ,CACnB,CAAC,CAED,cAAe,CAAAF,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}